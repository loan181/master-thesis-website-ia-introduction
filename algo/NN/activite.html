<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <title>Réseau neuronal</title>
    

<!-- Database -->

<!-- Firebase App is always required and must be first -->
<script src="https://www.gstatic.com/firebasejs/5.8.3/firebase-app.js"></script>

<!-- Add additional services that you want to use -->
<!--<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-auth.js"></script>-->
<script src="https://www.gstatic.com/firebasejs/5.8.3/firebase-database.js"></script>
<!--<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-firestore.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-messaging.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-functions.js"></script>-->

<!-- Comment out (or don't include) services that you don't want to use -->
<!-- <script src="https://www.gstatic.com/firebasejs/5.8.2/firebase-storage.js"></script> -->

<script>
    var config = {
        apiKey: "AIzaSyDbZnAznbgeP1_bxyn9XNGGL4C9z-ex46k",
        authDomain: "site-memoire.firebaseapp.com",
        databaseURL: "https://site-memoire.firebaseio.com",
        projectId: "site-memoire",
        storageBucket: "site-memoire.appspot.com",
        messagingSenderId: "639582982387"
    };
    firebase.initializeApp(config);
</script>

<script src="/master-thesis-website-ia-introduction/static/js/Database.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-134452435-1"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-134452435-1');
</script>

<!-- Required meta tags -->
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!-- Bootstrap CSS -->
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css" integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
<!-- Font Awesome-->
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.1/css/all.css" integrity="sha384-gfdkjb5BdAXd+lj+gudLWI+BXq4IuLW5IT+brZEZsLFm++aCMlF1V92rMkPaX4PP" crossorigin="anonymous">

<!-- Custom css -->
<link rel="stylesheet" href="/master-thesis-website-ia-introduction/static/css/style.css">

<!-- Optional JavaScript -->
<!-- jQuery first, then Popper.js, then Bootstrap JS -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.6/umd/popper.min.js" integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/js/bootstrap.min.js" integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k" crossorigin="anonymous"></script>

<!-- MathJax -->

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}
});
</script>

<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-MML-AM_CHTML' async></script>



    

    
        <!-- Raphael -->
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"> </script>
    

    <!-- Custom Extra scripts -->
    
        <script type="text/javascript" src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/blockly_compressed.js"></script>
    
        <script type="text/javascript" src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/blocks_compressed.js"></script>
    
        <script type="text/javascript" src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/javascript_compressed.js"></script>
    

    
        <!-- Arbitrary additions -->
        <!-- MDBootstrap Datatables  --> <link href="js/MDB/datatables.min.css" rel="stylesheet"> <!-- MDB core JavaScript --> <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mdbootstrap/4.7.4/js/mdb.min.js"></script> <!-- MDBootstrap Datatables  --> <script type="text/javascript" src="js/MDB/datatables.min.js"></script>
<!-- My Scripts --> <script src="js/NNDatas.js"></script> <script src="js/NN.js"></script> <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.1/bootstrap-slider.min.js"></script> <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-slider/10.6.1/css/bootstrap-slider.min.css">

    

    <script src="/master-thesis-website-ia-introduction/static/js/contentForTeacher.js"></script>

    <!-- Success Message -->
    <link rel="stylesheet" href="/master-thesis-website-ia-introduction/static/css/animationSuccess.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.1.1/TweenMax.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.9.1/underscore-min.js"></script>
</head>

<body>
<nav class="navbar sticky-top navbar-expand-lg navbar-dark bg-primary" style="z-index: 1025">
    <!--<a class="navbar-brand" href="#">Titre</a>-->
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul id="mainNavbarUl" class="navbar-nav mr-auto">
            <li class="nav-item">
                <a class="nav-link" href="/master-thesis-website-ia-introduction/"><i class="fas fa-home"></i></a>
            </li>
            <!-- Rest is filled automatically -->
        </ul>
        <ul class="navbar-nav">
            <li class="nav-item">
                <a class="nav-link" href="/master-thesis-website-ia-introduction/contact.html"><i class="far fa-envelope"></i> Me contacter</a>
            </li>
        </ul>
        <!--<form class="form-inline my-2 my-lg-0">-->
            <!--<input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search">-->
            <!--<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>-->
        <!--</form>-->
    </div>
</nav>

<script>
    let algoPrefix = "/master-thesis-website-ia-introduction/algo/";
    let algoActivityDesc = [
        "Introduction au concept général de l'algorithme",
        "Série de petits exercices de préparation pour introduire l'idée derrière l'algorithme.<br>Leur correction est automatisée.",
        "Activité interactive de l'algorithme considéré.<br>Ca sera l'étape finale pour prouver ta compréhension et découvrir le secret caché de cet algorithme !"
    ];
    let algoActivityIcon = [
        "<i class=\"far fa-lightbulb\"></i>",
        "<i class=\"fas fa-dumbbell\"></i>",
        "<i class=\"fas fa-flag-checkered\"></i>"
    ];
    // We can't use javascript variable into jekyll, so we precompute the values here
    let algoName = [ "Arbre de décision",  "Méthodes des K plus proches voisins",  "Réseau neuronal", ];
    let algoHRef = [ "arbre",  "KNN",  "NN", ];
    let algoActivityName = [ "Arbre interactif",  "Blockly",  "Réseau de neurones interactif", ];
    let algoIcon = [ '<i class="fas fa-tree"></i>',  '<i class="far fa-dot-circle"></i>',  '<svg class="icon icon-cart" role="img" xmlns="http://www.w3.org/2000/svg" style="height:21px" viewBox="0 0 640 512" class="svg-inline--fa fa-chart-network fa-w-20"><path fill="currentColor" d="M568 368c-19.1 0-36.3 7.6-49.2 19.7L440.6 343c4.5-12.2 7.4-25.2 7.4-39 0-61.9-50.1-112-112-112-8.4 0-16.6 1.1-24.4 2.9l-32.2-69c15-13.2 24.6-32.3 24.6-53.8 0-39.8-32.2-72-72-72s-72 32.2-72 72 32.2 72 72 72c.9 0 1.8-.2 2.7-.3l33.5 71.7C241.5 235.9 224 267.8 224 304c0 61.9 50.1 112 112 112 30.7 0 58.6-12.4 78.8-32.5l82.2 47c-.4 3.1-1 6.3-1 9.5 0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72zM232 96c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm104 272c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64zm232 96c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-54.4-261.2l-19.2-25.6-48 36 19.2 25.6 48-36zM576 192c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zM152 320h48v-32h-48v32zm-88-80c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64z" class="" data-darkreader-inline-fill="" style="--darkreader-inline-fill:currentColor;"></path></svg>', ];

    function populateNavBar() {
        for (let i = 0; i < algoHRef.length; i++) {
            let listItem = $('<li>');
            listItem.addClass("nav-item dropdown bg-primary");

            let algoIndexLink = $('<a>');
            algoIndexLink.addClass("nav-link");
            algoIndexLink.attr('href', algoPrefix + algoHRef[i] + "/");
            algoIndexLink.html(algoIcon[i] + " " + algoName[i] + ' <i class="fas fa-caret-down"></i>');
            listItem.append(algoIndexLink);

            let dropdown = $('<div>');
            dropdown.addClass("dropdown-menu showOnHover");

            let sections = getAllHrefForAlgo(i);
            for (let j = 0; j < sections.length; j++) {
                if (j === 2) {
                    dropdown.append($('<div>').addClass("dropdown-divider"));
                }
                sections[j].addClass("dropdown-item");
                dropdown.append(sections[j]);
            }

            listItem.append(dropdown);

            $("#mainNavbarUl").append(listItem);
        }


        /*
        <li class="nav-item dropdown bg-primary">
            <a class="nav-link" href="/algo/KNN/" role="button" aria-haspopup="true" aria-expanded="false">
                K plus proches voisins <i class="fas fa-caret-down"></i>
            </a>
            <div class="dropdown-menu showOnHover" aria-labelledby="navbarDropdown" style="z-index: 10001">
                <a class="dropdown-item" href="/algo/KNN/ex-preparatoires">Exercices préparatoires</a>
                <div class="dropdown-divider"></div>
                <a class="dropdown-item" href="/algo/KNN/blockly-aide">Consignes et utilisation pour la phase pratique</a>
                <a class="dropdown-item" href="/algo/KNN/blockly">Phase pratique (Blockly)</a>
            </div>
        </li>
         */
    }
    populateNavBar();

    function getAllHrefForAlgo(algoConfingIndex) {
        let ret = [];
        let pagesDefaultName = ["Introduction", "Exercices préparatoires", "Activité"];
        let pagesDefaultHref = ["intro", "exercice", "activite"];

        for (let i = 0; i < pagesDefaultName.length; i++) {
            let link = $('<a>');
            link.attr('href', algoPrefix + algoHRef[algoConfingIndex] + "/" + pagesDefaultHref[i]);

            let linkText = pagesDefaultName[i];
            if (i === 2) {
                linkText += ` (${algoActivityName[algoConfingIndex]})`;
            }
            link.html(algoActivityIcon[i] + " " + linkText);

            ret.push(link);
        }
        return ret;
    }

    // Automatically highlight in the dropdown if the link match
    function highlightCorrectNavItem() {
        var allLinks = document.getElementsByTagName("a");
        for(var i = 0; i < allLinks.length; i++){
            var curLink = allLinks[i];
            // We use concatenation of this 2 windows parameters to avoid # id inclusion when href to id
            if (curLink.href === window.location.origin + window.location.pathname) {
                curLink.className += " active";
                try {
                    // Try to highlight the caret (only works if it is a subsection)
                    curLink.parentNode.parentNode.querySelector('a').getElementsByClassName("fa-caret-down")[0].className += " text-white lead";
                } catch (e) {}
                break;
            }
        }
    }
    highlightCorrectNavItem();

</script>
<main role="main" class="container" style="max-width: 95%">
    <nav>
        <div class="nav nav-tabs" id="nav-tab-activity" role="tablist">
            <a class="nav-item nav-link" data-toggle="tab" href="#nav-objective" role="tab" aria-controls="nav-objective" aria-selected="true"><i class="fas fa-flag-checkered"></i> Objectif</a>
            <a class="nav-item nav-link active" data-toggle="tab" href="#nav-activity" role="tab" aria-controls="nav-profile" aria-selected="false"><i class="fas fa-gamepad"></i> Activité</a>
            
                <a class="nav-item nav-link" data-toggle="tab" href="#nav-hints" role="tab" aria-controls="nav-hints" aria-selected="false"><i class="fas fa-puzzle-piece"></i> Aide pour résoudre l'activité</a>
            
            
            
                <a id="nav-tab-activity-examples" class="nav-item nav-link" data-toggle="tab" href="#nav-example" role="tab" aria-controls="nav-example" aria-selected="false"><i class="fas fa-drafting-compass"></i> Exemples</a>
            
            <a class="nav-item nav-link" data-toggle="tab" href="#nav-details" role="tab" aria-controls="nav-details" aria-selected="false"><i class="fas fa-info"></i> Détails sur l'interface</a>
        </div>
    </nav>
    <div class="tab-content" id="nav-tabContent-activity">
        <!-- Objective Tab -->
        <div class="tab-pane fade" id="nav-objective" role="tabpanel" aria-labelledby="nav-objective-tab">
            <h1>Objectif</h1>
            <p>
                L'objectif de cette mission est d'obtenir un score de 100% pour cette activité.
                Une fois ce score atteint, le secret de cette activité te sera révélé.
            </p>
            <div class="progress-bar bg-success progress-bar-striped progress-bar-animated" role="progressbar" style="width: 100%; height: 32px">100.00%</div>
            <p>
                Le score est mis à jour à chaque fois que tu presses le bouton d'exécution <button type="button" class="btn btn-primary"><i class="fas fa-play"></i></button>.
            </p>

            
                <h2>Le score</h2>
                <p>
    Dans cette activité, un réseau de neurones déjà entrainé t'est donné.<br>
    Comme celui des exercices, il ne possède qu'une seule couche cachée, cependant le nombre de neurones est bien plus élevé !
    La première couche est composée de 784 neurones, la couche cachée de 200 neurones et la couche de sortie de 10 neurones.<br>
    Ce réseau de neurones a été entrainé afin de reconnaitre un chiffre (de 0 à 9) d'une image en nuance de gris de dimension 28 x 28.
</p> <p>
    Ton score dépend de la qualité de ton classifieur (ici le réseau de neurones).
    Celui-ci dépend de 2 fonctions que tu devras correctement implémenter :
    <code>gérer_la_couche_d'entrée(image)</code> et <code>prédire_valeur(valeur des neurones de la couche de sortie)</code>.<br>
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleEntryEmpty.svg" class="img-fluid" style="padding-right: 16px">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleOutputEmpty.svg" class="img-fluid">
</div>
<p>
    Tu auras donc 2 missions dans cette activité.<br>
    Tu devras d'abord gérer correctement les valeurs des neurones d'entrée à partir d'une image en nuance de gris.<br>
    Il faudra aussi que tu gères la dernière couche, pour cela les valeurs des neurones de cette couche te seront données, à toi d'en tirer le chiffre résultant.<br>
    Tous les calculs entre les couches (produits matriciels, etc) sont gérés automatiquement pour toi, tu n'auras pas à t'en soucier ici ;)
</p> <p>
    Le score augmente chaque fois que ton classifieur trouve le chiffre correspondant à celui de l'image testée.<br>
    Pour atteindre 100%, il faut donc qu'il les classe toutes correctement.
</p>

            
        </div>
        <!-- Activity Tab -->
        <div class="tab-pane fade show active" id="nav-activity" role="tabpanel" aria-labelledby="nav-activity-tab">
            <h1>Réseau neuronal</h1>

            <!-- Toolbox -->
            <div id="toolBox"></div>
            <script src="/master-thesis-website-ia-introduction/static/js/shared/ToolBox.js"></script>
            <script>
                let TB = new ToolBox("toolBox");
                TB.setToolBarForExercice("KNN");
                TB.draw();
            </script>

            <!-- Progress bar of prediction -->
            <div class="mt-2 col-md-12" >
                <h6 style="float: left; margin-right: 1em;"> Précision actuelle : </h6>
                <div id="progressBar"></div>
            </div>
            <script src="/master-thesis-website-ia-introduction/static/js/successBar.js"></script>
            <script>
                let pb = new ProgressBar("progressBar");
                function exerciceSuccess() {
                    $('#exerciceSuccess').modal('toggle');
                    fancyPopIn();
                }
            </script>

            <!-- Main content of the activity -->
            <div class="row mt-2 col-md-12">
    <div class="col-sm-4">
        <div>
            <canvas id="can" width="280" height="280" style="top:10%;left:10%;border:2px solid; cursor:crosshair; touch-action: none;"></canvas>
        </div>

        <div class="container">
            <input type="checkbox" style="transform: scale(1.5);" class="form-check-input" id="preprocessing">
            <label class="form-check-label form-label-lg" for="preprocessing"><i class="fas fa-magic"></i> Afficher l'image transformée</label>
            <div style="visibility: hidden"><input type="checkbox" id="scaleStrokeWidth" checked="true"><span style="margin-left:5px;">Scale Stroke Width</span></div>
            <div style="text-align: center">
                <button type="button" class="btn btn-primary btn-lg" id="recognize" onclick="recognize()"><i class="fas fa-search"></i> Reconnaitre</button><br><br>
                <button type="button" class="btn btn-info" data-toggle="modal" data-target="#modifyWeights"><i class="fas fa-edit"></i> Modifier le réseau</button>
                <button type="button" class="btn btn-warning" onclick="erase()"><i class="fas fa-eraser"></i> Effacer</button>
            </div>
            <div id="nnInput"></div>
        </div>

        <!-- Choose arc modal -->
        <div class="modal fade" id="modifyWeights" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Modifier le réseau de neurones</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="row">
                            <div class="col" align="center">
                                Couche 1<br>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(1, $(layer1spinner).val(), 'neuron')"><i class="far fa-circle"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(1, $(layer1spinner).val(), 'wOut')"><i class="fas fa-sign-out-alt"></i></button>
                                </div>
                                <div>
                                    <div style="padding-top: 20px; padding-bottom: 15px">
                                        <input id="layer1slider" type="text" data-slider-min="0" data-slider-max="783" data-slider-step="1" data-slider-value="0">
                                    </div>
                                    <div class="input-group">
                                        <input id="layer1spinner" type="number" class="form-control" value="0" min="0" max="783" step="1">
                                        <div class="input-group-append">
                                            <span class="input-group-text">/783</span>
                                        </div>
                                    </div>
                                    <script>
                                        $("#layer1slider").slider({
                                            orientation: 'vertical'
                                        });

                                        // Synchronize the value of the spinner and the one of the slider
                                        $("#layer1slider").on("slide", function(slideEvt) {
                                            $("#layer1spinner").val(slideEvt.value);
                                        });

                                        $("#layer1spinner").on("input", function(spinEvent) {
                                            $("#layer1slider").slider('setValue', $("#layer1spinner").val());
                                        });
                                    </script>
                                </div>
                            </div>
                            <div class="col" align="center">
                                <br>
                                <button type="button" class="btn btn-outline-secondary" onclick="buttonWeightLevelPressed(1,  $(layer1spinner).val(), $(layer1spinner2).val())"><i class="fas fa-arrows-alt-h"></i></button>
                            </div>
                            <div class="col" align="center">
                                Couche 2<br>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(2, $(layer1spinner2).val(), 'wIn')"><i class="fas fa-sign-in-alt"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(2, $(layer1spinner2).val(), 'neuron')"><i class="far fa-circle"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(2, $(layer1spinner2).val(), 'wOut')"><i class="fas fa-sign-out-alt"></i></button>
                                </div>
                                <div>
                                    <div style="padding-top: 20px; padding-bottom: 15px">
                                        <input id="layer1slider2" type="text" data-slider-min="0" data-slider-max="199" data-slider-step="1" data-slider-value="0">
                                    </div>
                                    <div class="input-group">
                                        <input id="layer1spinner2" type="number" class="form-control" value="0" min="0" max="199" step="1">
                                        <div class="input-group-append">
                                            <span class="input-group-text">/199</span>
                                        </div>
                                    </div>
                                    <script>
                                        $("#layer1slider2").slider({
                                            orientation: 'vertical'
                                        });

                                        // Synchronize the value of the spinner and the one of the slider
                                        $("#layer1slider2").on("slide", function(slideEvt) {
                                            $("#layer1spinner2").val(slideEvt.value);
                                        });

                                        $("#layer1spinner2").on("input", function(spinEvent) {
                                            $("#layer1slider2").slider('setValue', $("#layer1spinner").val());
                                        });
                                    </script>
                                </div>
                            </div>
                            <div class="col" align="center">
                                <br>
                                <button type="button" class="btn btn-outline-secondary" onclick="buttonWeightLevelPressed(2,  $(layer1spinner2).val(), $(layer1spinner3).val())"><i class="fas fa-arrows-alt-h"></i></button>
                            </div>
                            <div class="col" align="center">
                                Couche 3<br>
                                <div class="btn-group" role="group">
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(3, $(layer1spinner3).val(), 'wIn')"><i class="fas fa-sign-in-alt"></i></button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="buttonNeuronLevelPressed(3, $(layer1spinner3).val(), 'neuron')"><i class="far fa-circle"></i></button>
                                </div>
                                <div>
                                    <div style="padding-top: 20px; padding-bottom: 15px">
                                        <input id="layer1slider3" type="text" data-slider-min="0" data-slider-max="9" data-slider-step="1" data-slider-value="0">
                                    </div>
                                    <div class="input-group">
                                        <input id="layer1spinner3" type="number" class="form-control" value="0" min="0" max="9" step="1">
                                        <div class="input-group-append">
                                            <span class="input-group-text">/9</span>
                                        </div>
                                    </div>
                                    <script>
                                        $("#layer1slider3").slider({
                                            orientation: 'vertical'
                                        });

                                        // Synchronize the value of the spinner and the one of the slider
                                        $("#layer1slider3").on("slide", function(slideEvt) {
                                            $("#layer1spinner3").val(slideEvt.value);
                                        });

                                        $("#layer1spinner3").on("input", function(spinEvent) {
                                            $("#layer1slider3").slider('setValue', $("#layer1spinner").val());
                                        });
                                    </script>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
            </div>
        </div>


        <!-- Outgoing/Ingoing neurons weights modal -->
        <div class="modal fade" id="outWeightModal" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Poids <span class="inOrOut">de sorties</span> du neurone n°<span class="currentNeuronNumber"></span></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="weightsTable">
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Neuron information modal -->
        <div class="modal fade" id="neuronModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Neurone n°<span class="currentNeuronNumber"></span></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Couche : <span class="neuronLayerInfo"></span></p>
                        <div id="neuronModalInformationForSpecificLayers"></div>
                        Valeur : <span id="neuronValueInfo"></span>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Fermer</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Weight information modal -->
        <div class="modal fade" id="weightModal" tabindex="-1" role="dialog">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Poids reliant le neurone <span class="weightN1"></span> et <span class="weightN2"></span></h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <p>Couche : <span id="weightLayer"></span></p>
                        <p>Valeur Originale : <span id="weightOrigValue"></span></p>
                        <p>Valeur :
                        <div class="input-group mb-3">
                            <input id="weightValue" type="number" step="0.1" class="form-control">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="button" onclick="$('#weightValue').val(selectedWeight.weight)"><i class="fas fa-undo"></i> Valeur actuelle</button>
                                <button class="btn btn-outline-secondary" type="button" onclick="$('#weightValue').val(selectedWeight.defaultWeight)"><i class="fas fa-redo-alt"></i> Restaurer</button>
                            </div>
                        </div>
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-primary" data-dismiss="modal" onclick="selectedWeight.weight = Number($('#weightValue').val());"><i class="fas fa-save"></i> Appliquer</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times"></i> Fermer</button>
                    </div>
                </div>
            </div>
        </div>


        <br><br>

        <!--  -->
        <div class="container">
            <div class="row no-gutters">
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">0</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar0" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">1</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar1" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">2</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar2" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">3</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar3" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">4</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar4" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">5</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar5" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">6</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar6" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">7</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar7" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">8</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar8" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
                    <div class="col">
                        <h5 style="padding-left: 5px;">9</h5>
                        <div class="progress progress-bar-vertical">
                            <div id="percentBar9" class="progress-bar" role="progressbar" style="height: 0%;"></div>
                        </div>
                    </div>
                
            </div>
        </div>
        <p class="lead">
            Reconnu comme : <span id="nnOut"></span>
        </p>
    </div>


    <div class="col-sm-8">
        <ul class="nav nav-tabs" id="myTab" role="tablist">
            <li class="nav-item">
                <a class="nav-link active" id="home-tab" data-toggle="tab" href="#tabBlockly" role="tab" aria-controls="home" aria-selected="true"><i class="fas fa-code"></i> Blockly</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" id="profile-tab" data-toggle="tab" href="#tabNetworkRepr" role="tab" aria-controls="profile" aria-selected="false"><svg class="icon icon-cart" role="img" xmlns="http://www.w3.org/2000/svg" style="height:21px" viewBox="0 0 640 512" class="svg-inline--fa fa-chart-network fa-w-20"><path fill="currentColor" d="M568 368c-19.1 0-36.3 7.6-49.2 19.7L440.6 343c4.5-12.2 7.4-25.2 7.4-39 0-61.9-50.1-112-112-112-8.4 0-16.6 1.1-24.4 2.9l-32.2-69c15-13.2 24.6-32.3 24.6-53.8 0-39.8-32.2-72-72-72s-72 32.2-72 72 32.2 72 72 72c.9 0 1.8-.2 2.7-.3l33.5 71.7C241.5 235.9 224 267.8 224 304c0 61.9 50.1 112 112 112 30.7 0 58.6-12.4 78.8-32.5l82.2 47c-.4 3.1-1 6.3-1 9.5 0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72zM232 96c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm104 272c-35.3 0-64-28.7-64-64s28.7-64 64-64 64 28.7 64 64-28.7 64-64 64zm232 96c-13.2 0-24-10.8-24-24s10.8-24 24-24 24 10.8 24 24-10.8 24-24 24zm-54.4-261.2l-19.2-25.6-48 36 19.2 25.6 48-36zM576 192c35.3 0 64-28.7 64-64s-28.7-64-64-64-64 28.7-64 64 28.7 64 64 64zM152 320h48v-32h-48v32zm-88-80c-35.3 0-64 28.7-64 64s28.7 64 64 64 64-28.7 64-64-28.7-64-64-64z" class="" data-darkreader-inline-fill="" style="--darkreader-inline-fill:currentColor;"></path></svg> Réseau</a>
            </li>
        </ul>
        <div class="tab-content" id="myTabContent" style="height: 100%">
            <!-- Blockly content here -->
            <div class="tab-pane fade show active" id="tabBlockly" role="tabpanel" aria-labelledby="blockly-tab" style="height: 100%">
                <div id="blocklyArea" style="height: 100%">
                    <div id="blocklyDiv" style="width: 100%;height: 100%; min-height: 400px;">
                    </div>
                </div>
            </div>
            <!-- Network representation here -->
            <div class="tab-pane fade" id="tabNetworkRepr" role="tabpanel" aria-labelledby="network-tab">
                <div id="neuralNetworkContainer">
                </div>
                <script src="js/NN_representation.js"></script>
            </div>
        </div>

    </div>

</div>

<script src="js/modalHandler.js"></script>


<xml xmlns="http://www.w3.org/1999/xhtml" id="toolbox" style="display: none;">
    <category name="NN Image" colour="#a5805b">
  <block type="nnimgdrawn"></block>
  <block type="nnimgempty"></block>
  <block type="nnimgzero"></block>
  <block type="nnimgone"></block>
  <block type="nnimgtwo"></block>
  <block type="nnimgthree"></block>
  <block type="nnimgfour"></block>
  <block type="nnimgfive"></block>
  <block type="nnimgsix"></block>
  <block type="nnimgseven"></block>
  <block type="nnimgeight"></block>
  <block type="nnimgnine"></block>
  <block type="nnimgmario"></block>
</category>
<category name="NN Entrée" colour="#a55b5b">
<block type="flattenpicture"></block>
<block type="variables_set">
  <field name="VAR" id="MXvcOAlxfrtjHmcEITU2" variabletype="">imageAplatie</field>
</block>
<block type="nn_picture_w"></block>
<block type="nn_entry_neuron_value"></block>
<block type="nn_get_value_of_picture"></block>
</category>
<category name="NN Sortie" colour="#5b93a5">
<block type="nn_choose_value">
  <field name="NAME">min</field>
</block>
</category>
<category name="NN Test" colour="#5b93a5">
<block type="classifynn"></block>
<block type="text_print">
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
</category>
<category name="TODO" colour="#a5a55b">
<block type="procedures_defnoreturn">
  <mutation>
    <arg name="image" varid="*6p?S_wD}keQZ,fzP8uZ"></arg>
  </mutation>
  <field name="NAME">gérer la couche d'entrée</field>
  <comment pinned="false" h="80" w="160">Describe this function...</comment>
  <statement name="STACK">
    <block type="controls_for">
      <field name="VAR" id="Eg4`9@Hrn91U4iCj+#m%" variabletype="">i</field>
      <value name="FROM">
        <block type="math_number">
          <field name="NUM">1</field>
        </block>
      </value>
      <value name="TO">
        <shadow type="math_number">
          <field name="NUM">784</field>
        </shadow>
      </value>
      <value name="BY">
        <block type="math_number">
          <field name="NUM">1</field>
        </block>
      </value>
      <statement name="DO">
        <block type="nn_entry_neuron_value">
          <value name="neuron_ind">
            <block type="variables_get">
              <field name="VAR" id="Eg4`9@Hrn91U4iCj+#m%" variabletype="">i</field>
            </block>
          </value>
          <value name="picture_pixel">
            <shadow type="math_arithmetic">
              <field name="OP">MULTIPLY</field>
              <value name="A">
                <shadow type="math_arithmetic">
                  <field name="OP">MINUS</field>
                  <value name="A">
                    <shadow type="math_random_float"></shadow>
                  </value>
                  <value name="B">
                    <shadow type="math_number">
                      <field name="NUM">0.5</field>
                    </shadow>
                  </value>
                </shadow>
              </value>
              <value name="B">
                <shadow type="math_number">
                  <field name="NUM">2</field>
                </shadow>
              </value>
            </shadow>
          </value>
        </block>
      </statement>
    </block>
  </statement>
</block>
<block type="procedures_defreturn">
  <mutation>
    <arg name="valeur des neurones de la couche de sortie" varid="VJchVf59Wm99f:PfLv_M"></arg>
  </mutation>
  <field name="NAME">prédire valeur</field>
  <comment pinned="false" h="80" w="160">Describe this function...</comment>
  <statement name="STACK">
    <block type="variables_set">
      <field name="VAR" id="Z,b1ch;11Tk4y[4YA7bt" variabletype="">chiffrePrédit</field>
      <value name="VALUE">
        <block type="nn_choose_value">
          <field name="NAME">min</field>
          <value name="NAME">
            <block type="variables_get">
              <field name="VAR" id="VJchVf59Wm99f:PfLv_M" variabletype="">valeur des neurones de la couche de sortie</field>
            </block>
          </value>
        </block>
      </value>
    </block>
  </statement>
  <value name="RETURN">
    <block type="variables_get">
      <field name="VAR" id="Z,b1ch;11Tk4y[4YA7bt" variabletype="">chiffrePrédit</field>
    </block>
  </value>
</block>
</category>
<sep></sep>
<category name="%{BKY_CATLOGIC}" colour="#5C81A6">
<block type="controls_if"></block>
<block type="logic_compare">
  <field name="OP">EQ</field>
</block>
<block type="logic_operation">
  <field name="OP">AND</field>
</block>
<block type="logic_negate"></block>
<block type="logic_boolean">
  <field name="BOOL">TRUE</field>
</block>
<block type="logic_null"></block>
<block type="logic_ternary"></block>
</category>
<category name="%{BKY_CATLOOPS}" colour="#5CA65C">
<block type="controls_repeat_ext">
  <value name="TIMES">
    <shadow type="math_number">
      <field name="NUM">10</field>
    </shadow>
  </value>
</block>
<block type="controls_whileUntil">
  <field name="MODE">WHILE</field>
</block>
<block type="controls_for">
  <field name="VAR" id="THS4^TfI)l2UiS6X_u!w" variabletype="">i</field>
  <value name="FROM">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
  <value name="TO">
    <shadow type="math_number">
      <field name="NUM">10</field>
    </shadow>
  </value>
  <value name="BY">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
</block>
<block type="controls_forEach">
  <field name="VAR" id="|}Ao%A[OM*3|CdQiDQ|[" variabletype="">j</field>
</block>
<block type="controls_flow_statements">
  <field name="FLOW">BREAK</field>
</block>
</category>
<category name="%{BKY_CATMATH}" colour="#5C68A6">
<block type="math_number">
  <field name="NUM">0</field>
</block>
<block type="math_arithmetic">
  <field name="OP">ADD</field>
  <value name="A">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
  <value name="B">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
</block>
<block type="math_single">
  <field name="OP">ROOT</field>
  <value name="NUM">
    <shadow type="math_number">
      <field name="NUM">9</field>
    </shadow>
  </value>
</block>
<block type="math_trig">
  <field name="OP">SIN</field>
  <value name="NUM">
    <shadow type="math_number">
      <field name="NUM">45</field>
    </shadow>
  </value>
</block>
<block type="math_constant">
  <field name="CONSTANT">PI</field>
</block>
<block type="math_number_property">
  <mutation divisor_input="false"></mutation>
  <field name="PROPERTY">EVEN</field>
  <value name="NUMBER_TO_CHECK">
    <shadow type="math_number">
      <field name="NUM">0</field>
    </shadow>
  </value>
</block>
<block type="math_round">
  <field name="OP">ROUND</field>
  <value name="NUM">
    <shadow type="math_number">
      <field name="NUM">3.1</field>
    </shadow>
  </value>
</block>
<block type="math_on_list">
  <mutation op="SUM"></mutation>
  <field name="OP">SUM</field>
</block>
<block type="math_modulo">
  <value name="DIVIDEND">
    <shadow type="math_number">
      <field name="NUM">64</field>
    </shadow>
  </value>
  <value name="DIVISOR">
    <shadow type="math_number">
      <field name="NUM">10</field>
    </shadow>
  </value>
</block>
<block type="math_constrain">
  <value name="VALUE">
    <shadow type="math_number">
      <field name="NUM">50</field>
    </shadow>
  </value>
  <value name="LOW">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
  <value name="HIGH">
    <shadow type="math_number">
      <field name="NUM">100</field>
    </shadow>
  </value>
</block>
<block type="math_random_int">
  <value name="FROM">
    <shadow type="math_number">
      <field name="NUM">1</field>
    </shadow>
  </value>
  <value name="TO">
    <shadow type="math_number">
      <field name="NUM">100</field>
    </shadow>
  </value>
</block>
<block type="math_random_float"></block>
</category>
<category name="%{BKY_CATTEXT}" colour="#5CA68D">
<block type="text">
  <field name="TEXT"></field>
</block>
<block type="text_join">
  <mutation items="2"></mutation>
</block>
<block type="text_append">
  <field name="VAR" id="K^%p~GCz*:4+1]oGPJ*o" variabletype="">item</field>
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT"></field>
    </shadow>
  </value>
</block>
<block type="text_length">
  <value name="VALUE">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
<block type="text_isEmpty">
  <value name="VALUE">
    <shadow type="text">
      <field name="TEXT"></field>
    </shadow>
  </value>
</block>
<block type="text_indexOf">
  <field name="END">FIRST</field>
  <value name="VALUE">
    <block type="variables_get">
      <field name="VAR" id="42NTo)+~TBFjl.=p2$/q" variabletype="">text</field>
    </block>
  </value>
  <value name="FIND">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
<block type="text_charAt">
  <mutation at="true"></mutation>
  <field name="WHERE">FROM_START</field>
  <value name="VALUE">
    <block type="variables_get">
      <field name="VAR" id="42NTo)+~TBFjl.=p2$/q" variabletype="">text</field>
    </block>
  </value>
</block>
<block type="text_getSubstring">
  <mutation at1="true" at2="true"></mutation>
  <field name="WHERE1">FROM_START</field>
  <field name="WHERE2">FROM_START</field>
  <value name="STRING">
    <block type="variables_get">
      <field name="VAR" id="42NTo)+~TBFjl.=p2$/q" variabletype="">text</field>
    </block>
  </value>
</block>
<block type="text_changeCase">
  <field name="CASE">UPPERCASE</field>
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
<block type="text_trim">
  <field name="MODE">BOTH</field>
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
<block type="text_print">
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
<block type="text_prompt_ext">
  <mutation type="TEXT"></mutation>
  <field name="TYPE">TEXT</field>
  <value name="TEXT">
    <shadow type="text">
      <field name="TEXT">abc</field>
    </shadow>
  </value>
</block>
</category>
<category name="%{BKY_CATLISTS}" colour="#745CA6">
<block type="lists_create_with">
  <mutation items="0"></mutation>
</block>
<block type="lists_create_with">
  <mutation items="3"></mutation>
</block>
<block type="lists_repeat">
  <value name="NUM">
    <shadow type="math_number">
      <field name="NUM">5</field>
    </shadow>
  </value>
</block>
<block type="lists_length"></block>
<block type="lists_isEmpty"></block>
<block type="lists_indexOf">
  <field name="END">FIRST</field>
  <value name="VALUE">
    <block type="variables_get">
      <field name="VAR" id="}k`))q2-y$gHiBpoC}o_" variabletype="">list</field>
    </block>
  </value>
</block>
<block type="lists_getIndex">
  <mutation statement="false" at="true"></mutation>
  <field name="MODE">GET</field>
  <field name="WHERE">FROM_START</field>
  <value name="VALUE">
    <block type="variables_get">
      <field name="VAR" id="}k`))q2-y$gHiBpoC}o_" variabletype="">list</field>
    </block>
  </value>
</block>
<block type="lists_setIndex">
  <mutation at="true"></mutation>
  <field name="MODE">SET</field>
  <field name="WHERE">FROM_START</field>
  <value name="LIST">
    <block type="variables_get">
      <field name="VAR" id="}k`))q2-y$gHiBpoC}o_" variabletype="">list</field>
    </block>
  </value>
</block>
<block type="lists_getSublist">
  <mutation at1="true" at2="true"></mutation>
  <field name="WHERE1">FROM_START</field>
  <field name="WHERE2">FROM_START</field>
  <value name="LIST">
    <block type="variables_get">
      <field name="VAR" id="}k`))q2-y$gHiBpoC}o_" variabletype="">list</field>
    </block>
  </value>
</block>
<block type="lists_split">
  <mutation mode="SPLIT"></mutation>
  <field name="MODE">SPLIT</field>
  <value name="DELIM">
    <shadow type="text">
      <field name="TEXT">,</field>
    </shadow>
  </value>
</block>
<block type="lists_sort">
  <field name="TYPE">NUMERIC</field>
  <field name="DIRECTION">1</field>
</block>
</category>
<sep></sep>
<category name="%{BKY_CATVARIABLES}" colour="#A65C81" custom="VARIABLE"></category>
<category name="%{BKY_CATFUNCTIONS}" colour="#9A5CA6" custom="PROCEDURE"></category>
</xml>

<xml xmlns="http://www.w3.org/1999/xhtml" id="startBlocks" style="display: none;">
    <variables><variable type="" id="*6p?S_wD}keQZ,fzP8uZ">image</variable><variable type="" id="VJchVf59Wm99f:PfLv_M">valeur des neurones de la couche de sortie</variable><variable type="" id="Eg4`9@Hrn91U4iCj+#m%">i</variable><variable type="" id="Z,b1ch;11Tk4y[4YA7bt">chiffrePrédit</variable></variables><block type="procedures_defnoreturn" id="db-}-8UA`UY3tqKh?PUD" x="13" y="38"><mutation><arg name="image" varid="*6p?S_wD}keQZ,fzP8uZ"></arg></mutation><field name="NAME">gérer la couche d'entrée</field><comment pinned="false" h="80" w="160">Describe this function...</comment><statement name="STACK"><block type="controls_for" id=")[Pcuz]$aRjz(2GM4@!N"><field name="VAR" id="Eg4`9@Hrn91U4iCj+#m%" variabletype="">i</field><value name="FROM"><block type="math_number" id="{0?EhEj8b*v4^H_U-M^e"><field name="NUM">1</field></block></value><value name="TO"><shadow type="math_number" id="F=yX#Xsc$%ovuV9`a%Ki"><field name="NUM">784</field></shadow></value><value name="BY"><block type="math_number" id="gJ:}Y+e]Ds/RZD@gw6:d"><field name="NUM">1</field></block></value><statement name="DO"><block type="nn_entry_neuron_value" id="n2!NJm](]ALjO;@J^8,h"><value name="neuron_ind"><block type="variables_get" id="}9#;mg/ZQU*V5Kv)$B6d"><field name="VAR" id="Eg4`9@Hrn91U4iCj+#m%" variabletype="">i</field></block></value><value name="picture_pixel"><shadow type="math_arithmetic" id="vd.oz6Np:RB|ZQur-!?W"><field name="OP">MULTIPLY</field><value name="A"><shadow type="math_arithmetic" id="ZH7c9r%%v`k1n/`8pAkK"><field name="OP">MINUS</field><value name="A"><shadow type="math_random_float" id="bzfT%.B=Yqnj)RPvaXOZ"></shadow></value><value name="B"><shadow type="math_number" id="ky9h65tLs1p6U[=`I+hj"><field name="NUM">0.5</field></shadow></value></shadow></value><value name="B"><shadow type="math_number" id="/?eb*OU4^+=d,.2XUo{J"><field name="NUM">2</field></shadow></value></shadow></value></block></statement></block></statement></block><block type="procedures_defreturn" id="@YQ@E3B8P`8is#39N-|%" x="12" y="212"><mutation><arg name="valeur des neurones de la couche de sortie" varid="VJchVf59Wm99f:PfLv_M"></arg></mutation><field name="NAME">prédire valeur</field><comment pinned="false" h="80" w="160">Describe this function...</comment><statement name="STACK"><block type="variables_set" id="^Rq/bfoCYt=k7Lvz{g(["><field name="VAR" id="Z,b1ch;11Tk4y[4YA7bt" variabletype="">chiffrePrédit</field><value name="VALUE"><block type="nn_choose_value" id=":VPF7QekDKYj}7#*`d*c"><field name="NAME">min</field><value name="NAME"><block type="variables_get" id="h)MB@G~VT|9Qj4ot1T/F"><field name="VAR" id="VJchVf59Wm99f:PfLv_M" variabletype="">valeur des neurones de la couche de sortie</field></block></value></block></value></block></statement><value name="RETURN"><block type="variables_get" id="09W#GxJ,%M9t,AgpkVK+"><field name="VAR" id="Z,b1ch;11Tk4y[4YA7bt" variabletype="">chiffrePrédit</field></block></value></block>
</xml>

<script src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/blockly_compressed.js"></script>
<script src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/blocks_compressed.js"></script>
<script src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/src/javascript_compressed.js"></script>

<script src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/languageCode.js"></script>
<script src="/master-thesis-website-ia-introduction/static/js/shared/Blockly/BlocklyScripts.js"></script>
<script src="js/NNBlocklyFunctions.js"></script>
        </div>

        <!-- Useful actions Tab -->
        

        
        <!-- Example Tab -->
        <div class="tab-pane fade" id="nav-example" role="tabpanel" aria-labelledby="nav-example-tab">
            <h1>Exemple</h1>
            
                <h3></h3>
                <p>
    Voici quelques exemples de l'utilisation du programme Blockly.<br>
    Pour tous ces exemples on va supposer que ton <b>implémentation des 2 fonctions dans <code>TODO</code> sont correctes</b>.<br>
    Si ça n'est pas le cas tu auras soit un message d'erreur, soit un message avec un résultat différent.<br>
    N'oublie pas d'utiliser le bouton <button type="button" class="btn btn-warning"><i class="fas fa-bug"></i></button> pour lancer ton code dans cette partie !
</p>

            
                <h3>Reconnaitre le chiffre dans une image avec le réseau de neurones</h3>
                <p>
    Le bloc <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/classify.svg"> te permet de classifier l'image donnée en argument, en utilisant le réseau de neurones.<br>
    Tu as également plusieurs images disponibles dans la section <code>NN Images</code> que tu peux utiliser avec le bloc précédent afin de vérifier si tes prédictions sont correctes.<br>
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/exampleClassify.JPG" class="img-fluid"><br>
    <p class="text-muted">Je demande de classifier une image d'un 2 à mon réseau de neurones et d'afficher le résultat à l'écran.<br>Le résultat affiché dans la boite de dialogue est bien le chiffre annoncé</p>
</div>
<p>
    Tu peux aussi dessiner dans le cadre noir à gauche afin qu'il l'utilise comme image.
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/exampleClassifyDraw2.JPG" class="img-fluid"><br>
    <p class="text-muted" style="padding-bottom: 32px">Le réseau a bien reconnu mon superbe 2 !</p>
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/exampleClassifyDraw3.JPG" class="img-fluid" ><br>
    <p class="text-muted" style="padding-bottom: 32px">Je n'ai rien changé au code! J'ai juste dessiné l'image d'un autre chiffre </p>
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/exampleClassifyDrawBG.JPG" class="img-fluid"><br>
    <p class="text-muted">Le réseau de neurones fera toujours de son mieux pour trouver un chiffre dans l'image dessinée...</p>
</div>

            
        </div>
        
        
            <!-- Hints/Help for solving the activity Tab -->
            <div class="tab-pane fade" id="nav-hints" role="tabpanel" aria-labelledby="nav-hints-tab">
                <h1>Aide pour résoudre l'activité</h1>
                <p>
                    L’algorithme peut être séparé en plusieurs étapes distinctes qui, petit à petit, te rapprocheront de la solution.
                    Je vais t’aider dans cette partie à atteindre la bonne solution en te donnant les intuitions.<br>
                    Libre à toi de faire autrement si tu le souhaites tant que la prédiction finale est bonne.
                </p>
                
                    <h3>Etape 1 : Bien commencer !</h3>
                    <p>
    Dans la section <code>TODO</code> de la boite à outil de Blockly tu trouveras une première implémentation pour les 2 fonctions que tu dois créer.<br>
    Commence par les prendre et glisse les dans ton code.
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/defaultBlocks.svg" class="img-fluid">
</div>
<p>
   Pour essayer, lance la prédiction : tu auras normalement un taux de prédiction assez faible, dans les alentours des 10%.<br>
    C'est normal, pour l'instant il est paramétré aléatoirement et comme il y a 10 résultats possibles, il à 10% de chance de réussir pour chaque prédiction.
</p>
<div class="mt-2 col-md-12">
    <h6 style="float: left; margin-right: 1em;"> Prédiction courante : </h6>
    <div class="progress" style="height: 32px;">
        <div class="progress-bar bg-danger progress-bar-striped progress-bar-animated" role="progressbar" style="width: 10%;">10.00%</div>
    </div>
</div>

                    
                    
                    
                
                    <h3>Etape 2 : Implémentation de la fonction pour gérer les valeurs des neurones d'entrées</h3>
                    <p>
    Commencons par gérer correctement les valeurs de nos neurones de la couche d'entrée.
    L'idée de l'implémentation est la même que dans <a href="exercice#valeur-des-neurones-de-la-premi-re-couche" target="_blank">le premier exercice préparatoire</a>.
</p> <p>
    Cette fonction prend une image en nuances de gris de taille 28 x 28 en argument.<br>
    Le but de cette fonction est d'initialiser la valeur de tous les neurones de la couche d'entrée à partir de la couleur des pixels de l'image.<br>
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleEntryDefault.svg" class="img-fluid">
</div>
<p>
    Dans l'état présent, les 784 neurones de la couche d'entrée sont initialisés aléatoirement sans prendre en compte l'image !<br>
</p>
<p>
    Nous sommes censés attribuer à chaque neurone la valeur de couleur du pixel correspondant de l'image de la même manière que dans <a href="exercice#valeur-des-neurones-de-la-premi-re-couche" target="_blank">le premier exercice préparatoire</a>.<br>
    Avec l'implémentation par défaut et tous les blocs de la section <code>NN Entrée</code> tu as tout le nécessaire pour implémenter la fonction ;). <br>
    Le bloc <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/flattenPicture.svg" class="img-fluid"> te permettra "d'aplatir" une image,
    l'idée étant de transformer l'image originale en 2D de taille 28 x 28 à son équivalent aplatie en 1D de taille 784 ($28 \times 28$)
 </p>

<div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/flattenExample.png" class="img-fluid"><br>
    <small class="text-muted">Exemple d'aplatisement d'une image en noir et blanc de taille 3 x 3. Le résultat aplatie est une image à 1 dimension de taille 9</small>
</div>

                    
                    
                        <div class="card border-warning mb-3">
    <div class="card-header" onclick="toggleSib(this)">
        <button class="btn btn-link" type="button" onclick="toggleNext(this)">
            Aide
        </button>
    </div>
    <div class="collapse hide">
        <div class="card-body">
            <p class="card-text">
                Voici la structure à suivre pour résoudre cette partie : <ol>
    <li>Aplatir l'image et la sauvegarder dans <code>imageAplatie</code></li>
    <li>Pour tous les neurones de 1 à 784 (la longueur de l'image aplatie)</li>
    <li>Donner au neurone d'entrée du numéro courant la valeur du pixel de l'image du numéro courant de l'image aplatie</li>
</ol>

            </p>
        </div>
    </div>
</div>
                    
                    
                        <button type="button" class="btn btn-success" onclick="giveCorrection(this)"><i class="fas fa-puzzle-piece"></i> Afficher la correction</button>
                        <div class="card border-success mb-3 onlyTeacher collapse">
    <div class="card-header">Correction</div>
    <div class="card-body text-success">
        <p class="card-text">
            <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleEntryCorection.svg" class="img-fluid"><br>
</div> Cela fonctionne aussi en mettant 784 comme borne de la boucle.

        </p>
    </div>
</div>
                    
                
                    <h3>Etape 3 : Implémentation de la fonction pour gérer la conclusion des neurones de sortie</h3>
                    <p>
    La dernière partie de cette activité consiste à déduire une conclusion à partir des valeurs des neurones de sortie.<br>
    L'idée de l'implémentation est la même qu'un des <a href="exercice#tirer-des-conclusions-de-nos-r-sultats" target="_blank">exercices préparatoires</a>.<br>
</p> <p>
    Les valeurs des neurones de sortie sont automatiquement calculés à partir des neurones des autres couches.<br>
    Les neurones de la couche de sortie ont une valeur entre 0 et 1. Leur somme fait toujours 1.<br>
    Les 10 neurones de cette couche représentent chaque chiffre de 0 à 9. La valeur du neurone représente la probabilité du chiffre qui lui est associé.<br>
    <small class="text-muted">Par exemple si le 1er neurone à la valeur 0.4, cela signifie qu'il y a 40% de chance que l'image représente le chiffre 0.</small>
</p> <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleOutputDefault.svg" class="img-fluid">
</div>
<p>
    Dans l'état présent c'est le chiffre de probabilité minimale qui est renvoyé. Mais c'est incorrect.<br>
</p>

                    
                    
                        <div class="card border-warning mb-3">
    <div class="card-header" onclick="toggleSib(this)">
        <button class="btn btn-link" type="button" onclick="toggleNext(this)">
            Aide
        </button>
    </div>
    <div class="collapse hide">
        <div class="card-body">
            <p class="card-text">
                Imagine que la valeur des 10 neurones de la couche de sortie soit : <ol start="0">
    <li>0.1</li>
    <li>0</li>
    <li>0</li>
    <li>0.7</li>
    <li>0</li>
    <li>0</li>
    <li>0</li>
    <li>0.15</li>
    <li>0</li>
    <li>0.05</li>
</ol> Quel serait le chiffre qui devrait être déduit ?<br> <code>3</code>, car il a <b>la plus grande</b> probabilité !

            </p>
        </div>
    </div>
</div>
                    
                    
                        <button type="button" class="btn btn-success" onclick="giveCorrection(this)"><i class="fas fa-puzzle-piece"></i> Afficher la correction</button>
                        <div class="card border-success mb-3 onlyTeacher collapse">
    <div class="card-header">Correction</div>
    <div class="card-body text-success">
        <p class="card-text">
            <div class="mx-auto" align="center">
    <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/handleOutputCorection.svg" class="img-fluid"><br>
</div> Très simple ici, il suffit de changer le "minimum" en "maximum". C'est le chiffre avec la plus grande probabilité qui nous intéresse !

        </p>
    </div>
</div>
                    
                

            </div>
        
        <!-- Details/documentation Tab -->
        <div class="tab-pane fade" id="nav-details" role="tabpanel" aria-labelledby="nav-details-tab">
            <h1>Détails sur l'interface</h1>
            <h2>Structure de la page</h2>
            
                <h3>Barre d'outil</h3>
                <p>
                    Dans la partie supérieure de l’écran tu as différents boutons te permettant de réaliser certaines actions que nous allons détailler ici.
                </p>
                <div id="toolboxExplanation"></div>
                <script>
                    //let TBEXplanation = new ToolBox();
                    let explanations = [];
                    
                    explanations.push("Commencer un nouveau projet. Cela effacera tous les blocs.");
                    
                    explanations.push("Sauvegarder/télécharger ton projet sur ton ordinateur (uniquement les blocs de Blockly).<br>Les paramètres ne sont pas enregistrés.");
                    
                    explanations.push("Ouvrir un projet précédemment sauvegardé.<br>Uniquement les blocs Blockly sont chargés.");
                    
                    explanations.push("Exporte le projet (blocs) sous forme d’image (SVG (vectoriel) ou PNG).<br>Attention, si tu exportes en image tu ne peux pas l’ouvrir comme projet.");
                    
                    explanations.push("Voir le code JavaScript généré par Blockly dans une fenêtre pop-up.");
                    
                    explanations.push("Tester le code. Se contentera d’exécuter le code du projet tel quel.");
                    
                    explanations.push("<b>Tester le classifieur</b>. Lance le programme en évaluant si les prédictions sont correctes.<br>Cela te permettra de réussir ton objectif !");
                    
                    explanations.push("Renvoie vers la page d'aide (celle-ci).");
                    
                    explanations.push("Te permet de choisir la langue.<br>Seulement le français est pleinement compatible. Les autres changeront uniquement le texte des blocs de Blockly.");
                    
                    TB.drawExplanation("toolboxExplanation", explanations);
                </script>
            

            
                <h3>Dessin et réseau neuronal</h3>
                La partie de gauche te permet plusieurs choses : dessiner dans le cadre noir pour le réseau neuronal, modifier les poids du réseau, lancer le réseau sur le dessin du cadre et observer les probabilités de chaque chiffre (résultat de la classification du réseau neuronal).


                <ul class="list-unstyled">
                    
                        <li class="media">
                            <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/parts/DrawFrame.JPG" class="mr-3 img-fluid" >
                            <div class="media-body">
                                <h4 class="mt-0 mb-1">Panneau Graphe et Données</h4>
                                Cadre de dessin, utilise-le avec la souris ou au doigt (avec écran tactile) pour dessiner dedans.<br> Tu peux y dessiner ce que tu veux, mais le réseau neuronal tentera de reconnaître toujours un chiffre dans l'image.<br> La case à cocher en dessous te permet d'afficher l'image transformée après que tu aies lancé la recherche (par le réseau). Tu y verras normalement une image de 28 x 28 sur fond blanc de ton dessin, c'est cette image transformée qui servira comme entrée au réseau de neurones lors de la reconnaissance.

                            </div>
                        </li>
                    
                        <li class="media">
                            <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/parts/buttons.JPG" class="mr-3 img-fluid" >
                            <div class="media-body">
                                <h4 class="mt-0 mb-1">Boutons permettant d'interagir avec le réseau</h4>
                                Le premier bouton te permet de lancer la reconnaissance par le réseau de neurones. L'image dessinée sera lue, les neurones de la couche d'entrée prendront leur valeur à partir de l'image transformée et la classification se lancera.<br> Le dernier bouton te permet simplement d'effacer l'image dessinée.<br> Le second bouton est un peu plus technique, il te permet de modifier directement la valeur des poids de ton réseau de neurones ainsi que consulter les valeurs des neurones. Attention, si tu fais ça, ton réseau de neurones risque de ne plus être en mesure de reconnaître correctement les chiffres ! Une explication plus détaillée de l'utilisation de ce bouton se trouve sur <a href="explicationModificationReseau" target="_blank">cette page</a>.

                            </div>
                        </li>
                    
                </ul>
            

            
                <h3>Blockly et vue graphique</h3>
                <p>
                    La partie de droite est l'emplacement où tu pourras modifier le code de l'algorithme à l'aide de Blockly afin de réussir l'objectif. Tu peux aussi consulter une version graphique du réseau de neurones.
                </p>

                
                    <h2>Graphique du réseau</h2> <img src="/master-thesis-website-ia-introduction/static/img/NN/acti/parts/NetworkRepr.JPG" class="img-fluid"> <p>
    Un cercle représente un neurone, son numéro est indiqué à l'intérieur. Plus sa couleur est foncée, plus sa valeur est grande.<br>
    Les lignes reliant les cercles représentent les poids, plus la ligne est opaque, plus sa valeur est grande.<br>
    Chaque colonne correspond à une couche, elles augmentent de gauche à droite.<br>
    Tu peux cliquer sur les neurones et poids pour afficher une pop-up d'information/modification à leur sujet.<br><br>
    Comme le réseau est immense ( 784 x 200 x 10 neurones), tous les neurones des 2 premières couches ne peuvent pas être représentés.
    Les neurones changent du coup à chaque reconnaissance avec le réseau, les neurones ayant la plus grande contribution au résultat final sont alors choisis
    (c'est pour ça que la transparence des poids augmente du haut vers le bas).
</p>

                
                
                    <h4>Blocs supplémentaires</h4>

                    <table class="table table-hover">
                        <thead>
                        <tr>
                            <th scope="col">Bloc</th>
                            <th scope="col">Explication</th>
                            <th scope="col">Type de retour</th>
                        </tr>
                        </thead>
                        <tbody>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNDrawnPicture.svg" class="img-fluid"></td>
                                <td>Permet de récupérer sous forme d'image le dessin dans le cadre noir</td>
                                
                                    <td>Image</td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNZeroPicture.svg" class="img-fluid"></td>
                                <td>Image pré-dessinée d'un zéro (il y a une image pour chaque chiffre)</td>
                                
                                    <td>Image</td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNPictureWidth.svg" class="img-fluid"></td>
                                <td>Calcule et retourne la longueur de l'image. C'est le nombre de pixels horizontaux. L'image peut être en 2D ou en 1D</td>
                                
                                    <td>Nombre</td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNGiveNeuronValue.svg" class="img-fluid"></td>
                                <td>Permet de donner une certaine valeur à un certain neurone de la couche d'entrée</td>
                                
                                    <td><i>Rien</i></td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNGetPicturePixelValue.svg" class="img-fluid"></td>
                                <td>Récupère la valeur d'un certain pixel de l'image, l'image doit être en 1 dimension</td>
                                
                                    <td>Nombre</td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNGetMaxMinOutput.svg" class="img-fluid"></td>
                                <td>Récupère le numéro du neurone de probabilité minimale/maximale</td>
                                
                                    <td>Nombre</td>
                                
                            </tr>
                        
                            <tr>
                                <td><img src="/master-thesis-website-ia-introduction/static/img/blocklyBlocks/NNClassify.svg" class="img-fluid"></td>
                                <td>Permet d'utiliser le réseau de neurones pour classifier une image <br>Cela te sera utile seulement en <a href="#" onclick="$('#nav-tab-activity-examples').tab('show')">debug</a></td>
                                
                                    <td>Nombre</td>
                                
                            </tr>
                        
                        </tbody>
                    </table>
                
            
        </div>
    </div>

</main>

<!-- Success Animation when activity is succeded -->
<div class="modal" id="exerciceSuccess" tabindex="-1" role="dialog" aria-labelledby="exerciceSuccessLabel" aria-hidden="true" style="background-color: rgba(0,250,255,0.5);">
    <div class="modal-dialog modal-dialog-centered" role="document">
        <div id="congrats">
            <h1 id="sucessMessage">Bravo !
            
                <br>
                Le secret de cet exercice est : sucre d'orge<br>
                <i class="fas fa-candy-cane"></i>
            
            </h1>
        </div>
    </div>
</div>
<script src="/master-thesis-website-ia-introduction/static/js/animationSuccess.js"></script>
<script>
    function giveCorrection(elem) {
        if (confirm("Souhaites-tu vraiment afficher la correction ? ")) {
            let correctionNode = elem.nextElementSibling;
            if (correctionNode.className.includes("onlyTeacher")) {
                correctionNode.style.display = "block";
                $(correctionNode).collapse({
                    toggle: true
                })
            }
            elem.remove();
        }
    }
</script>

<script src="/master-thesis-website-ia-introduction/static/js/enlargeImageModal.js"></script>
<!-- Creates the bootstrap modal where the image will appear -->
<div class="modal fade bd-example-modal-xl" id="imagemodal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header">
                <a href="#" target="_blank" id="imagepreviewLink"> <i class="fas fa-external-link-alt"></i></a>
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            </div>
            <div class="modal-body">
                <div class="mx-auto" align="center">
                    <img src="" class="imagepreview" data-dismiss="modal" style="max-width: 100%; height:auto">
                </div>
            </div>
        </div>
    </div>
</div>


</body>
</html>